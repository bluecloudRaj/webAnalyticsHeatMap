function loadScripts(e,t){var o=function(n){if(n[1]){var a=e.shift();a?o(a):t()}else{var c=document.createElement("script");c.type="text/javascript",c.src=n[0];var a=e.shift();a?c.onload=o(a):c.onload=c.onreadystatechange=function(){t()},document.getElementsByTagName("head")[0].appendChild(c)}};o(e.shift())}function init(e){setTimeout(function(){var t=io.connect(appUrl,{query:"k="+heater.key+"&v="+e+"&w="+$(window).width()+"&h="+$(window).height()+"&x="+$(window).scrollLeft()+"&y="+$(window).scrollTop()});t.on("connect",function(){t.on("download",function(){var e=document.doctype;if(e)var o="<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">";else var o="";t.emit("downloadPage",o+document.documentElement.outerHTML)});var e=Date.now(),o=0,n=0,a=null;$(document).mousemove(function(a){var c=a.pageX-$(window).scrollLeft(),i=a.pageY-$(window).scrollTop();Date.now()-e>100&&(o!=c||n!=i)&&(e=Date.now(),t.emit("action",{type:1,x:c,y:i,createdAt:new Date}),o=c,n=i)}),$(document).click(function(e){t.emit("action",{type:2,x:e.pageX-$(window).scrollLeft(),y:e.pageY-$(window).scrollTop(),createdAt:new Date})}),$(window).scroll(function(e){a||(a=setTimeout(function(){clearTimeout(a),a=null,t.emit("action",{type:3,x:$(window).scrollLeft(),y:$(window).scrollTop(),createdAt:new Date})},250))})})},100)}const appUrl="http://localhost:5001/";loadScripts([["https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js",window.jQuery],[appUrl+"socket.io/socket.io.js",window.io]],function(){var e=localStorage.getItem("heaterId");e||(e="xxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,o="x"==e?t:3&t|8;return o.toString(16)}),localStorage.setItem("heaterId",e));var t=setInterval(function(){"complete"===document.readyState&&"prerender"!=document.visibilityState&&(clearInterval(t),init(e))},10)});